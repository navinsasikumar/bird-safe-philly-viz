"use strict";(self.webpackChunkbird_safe_philly_viz=self.webpackChunkbird_safe_philly_viz||[]).push([[649],{8535:function(e,t,r){r.r(t);var n=r(7294),a=r(6406);t.default=function(e){var t=e.data.allObs.edges,r=(e.data.grouped.group,30),o=140,l=80,s=60,c=1490-s-o,i=440-r-l,u="steelblue",p=a.Z1g("%Y-%m-%d"),d=a.YFb((function(e){return e.weekYear})).left,f=a.WUZ(","),m=a.i$Z("%m/%d/%y"),y=t.reduce((function(e,t){return e[t.node.observed_on]=e[t.node.observed_on]||[],e[t.node.observed_on].push(t.node),e}),Object.create(null)),h=Object.keys(y).map((function(e){return{weekYear:p(e),count:y[e].length,species:y[e].reduce((function(e,t){return e[t.taxon.preferred_common_name]=e[t.taxon.preferred_common_name]||[],e[t.taxon.preferred_common_name].push(t.taxon),e}),Object.create(null))}})).sort((function(e,t){return e.weekYear-t.weekYear}));console.log(h);var g=h.map((function(e){return e.weekYear})),x=a.Xf().domain(a.Wem(g)).range([0,c]),v=a.rr1,k=x.ticks(v).map((function(e){return h.find((function(t){return t.weekYear.getTime()===e.getTime()}))||{weekYear:e,count:0}})),w=k.map((function(e){return e.count})),b=a.BYU().domain(a.Wem(w)).range([i,0]),Y=a.jvg().x((function(e){return x(e.weekYear)})).y((function(e){return b(e.count)})).curve(a.FdL),_=a.LLu().scale(x),E=a.y4O().scale(b),j=n.useRef(),O=n.useRef(),z=n.useRef(),S=n.useRef();return n.useEffect((function(){a.Ys(z.current).attr("class","tooltip").style("position","absolute").style("visibility","hidden");var e=a.Ys(S.current).attr("class","details"),t=a.Ys(O.current).append("g").attr("transform","translate("+s+","+r+")");t.append("g").attr("transform","translate(0,"+i+")").call(_),t.append("g").attr("transform","translate(0, 0)").attr("class","y axis").call(E).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Count"),t.append("path").datum(k).attr("fill","none").attr("stroke",u).attr("stroke-width",3).attr("d",Y);var n=t.append("g").attr("class","focus").style("display","none");n.append("circle").attr("r",5),n.append("rect").attr("class","tooltip").attr("width",80).attr("height",50).attr("x",10).attr("y",-22).attr("rx",4).attr("ry",4),n.append("text").attr("class","tooltip-date").attr("x",18).attr("y",-2),n.append("text").attr("x",18).attr("y",18).text("Count:"),n.append("text").attr("class","tooltip-count").style("font-weight","bold").attr("x",60).attr("y",18),t.append("rect").attr("class","overlay").attr("width",c).attr("height",i).on("mouseover",(function(){n.style("display",null)})).on("mouseout",(function(){n.style("display","none")})).on("mousemove",(function(t){var r=x.invert(a.cx$(t)[0]),o=d(k,r,1),l=k[o-1],s=k[o],c=r-l.weekYear>s.weekYear-r?s:l;n.attr("transform","translate("+x(c.weekYear)+","+b(c.count)+")"),n.select(".tooltip-date").text(m(c.weekYear)),n.select(".tooltip-count").text(f(c.count));var i=c.count>0&&Object.keys(c.species).sort((function(e,t){return c.species[t].length-c.species[e].length})).reduce((function(e,t){return e+(t+": ")+c.species[t].length+", "}),""),u=c.count>0?"Species: "+i.replace(/(,\s*$)/g,""):"";e.html("").append("div").html("\n          <h5>"+m(c.weekYear)+"</h5>\n          <p>Total: "+c.count+"</p>\n          <p>"+u+"</p>\n        ")})),t.append("circle").attr("cx",0).attr("cy",i+30).attr("r",6).style("fill",u),t.append("text").attr("x",20).attr("y",i+30).text("Total observations in project").style("font-size","15px").attr("alignment-baseline","middle")}),[j.current]),n.createElement("main",{ref:j},n.createElement("title",null,"Bird Safe Philly Data Viz"),n.createElement("h1",null,"Bird Safe Philly Data Viz"),n.createElement("h5",{style:{"margin-left":s-20,"margin-bottom":0}},"Daily Window Strikes"),n.createElement("svg",{width:c+s+o,height:i+r+l,ref:O}),n.createElement("div",{ref:S}),n.createElement("div",null,t.map((function(e,t){var r=e.node;return n.createElement("div",{key:t},n.createElement("p",null,"Species: ",r.taxon.preferred_common_name))}))))}}}]);
//# sourceMappingURL=component---src-pages-index-d-3-js-3d431edc190ac4099a14.js.map